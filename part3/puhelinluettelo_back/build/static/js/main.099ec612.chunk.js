(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t(1),c=t(15),u=t.n(c),o=t(3),s=t(6),i=t(4),l=t.n(i),d="api/persons",b=function(){return l.a.get(d).then((function(e){return e.data}))},f=function(e){return l.a.post(d,e).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(d,"/").concat(e)),e},m=function(e,n){var t=Object(s.a)(Object(s.a)({},e),{},{number:n});return l.a.put("".concat(d,"/").concat(e.id),t).then((function(e){return e.data}))},j=function(e){return Object(a.jsxs)("div",{children:["Search by name or number",Object(a.jsx)("input",{value:e.searchWord,type:"text",placeholder:"Search...",onChange:e.callback})]})},v=function(e){var n=e.name,t=e.number,r=e.id,c=e.removePerson;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(){return c(r)},children:"delete"})})]})},O=function(e){var n=e.persons,t=e.searchWord,r=e.removePerson,c=0,u=n.map((function(e){if(c++,e.name.toLowerCase().includes(t.toLowerCase()))return Object(a.jsx)(v,{name:e.name,number:e.number,id:e.id,removePerson:r},e.id)}));return Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:u},c)})},p=function(e){var n=e.newName,t=e.handleChange,r=e.numberInput,c=e.handleNumber,u=e.addPerson;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"add new contact"}),"name: ",Object(a.jsx)("input",{value:n,onChange:t}),"number: ",Object(a.jsx)("input",{value:r||"",onChange:c}),Object(a.jsx)("button",{type:"submit",onClick:u,children:"add"})]})},x=function(e){var n=e.message,t=e.status;if(null===n)return null;return Object(a.jsx)("div",{className:function(e){var n;switch(e){case"create":case"update":return n="success";case"delete":case"failure":return n="alert";default:return n}}(t),children:n})},g=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)(""),s=Object(o.a)(u,2),i=s[0],l=s[1],d=Object(r.useState)(""),v=Object(o.a)(d,2),g=v[0],w=v[1],y=Object(r.useState)(""),k=Object(o.a)(y,2),C=k[0],P=k[1],S=Object(r.useState)(null),D=Object(o.a)(S,2),N=D[0],I=D[1];Object(r.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var T=function(e,n){I({message:e,status:n}),setTimeout((function(){I(null)}),5e3)};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),N&&Object(a.jsx)(x,{message:N.message,status:N.status}),Object(a.jsx)(j,{searchWord:C,callback:function(e){e.preventDefault(),P(e.target.value)}}),Object(a.jsx)("div",{style:{height:30}}),Object(a.jsx)(O,{persons:t,searchWord:C,removePerson:function(e){var n=t.find((function(n){return n.id===e}));if(window.confirm("Delete ".concat(n.name," ?"))){var a=h(e),r=t.filter((function(e){return e.id!==a}));c(r),I({message:"Person ".concat(n.name," was removed"),status:"delete"}),setTimeout((function(){I(null)}),5e3)}}}),Object(a.jsx)("div",{style:{height:30}}),Object(a.jsx)(p,{name:i,handleNumber:function(e){e.preventDefault(),w(e.target.value)},handleChange:function(e){e.preventDefault(),l(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.some((function(e){return e.number===g})),a=t.some((function(e){return e.name===i}));return n?(T("Given phonenumber is already in the phonebook","failure"),w(""),n):a?(function(e,n,t,a,r){if(n.length){if(!window.confirm("".concat(e.name," is already added to the phonebook, replace the old number with the new one?")))return;m(e,n).then((function(n){a(t.map((function(t){return t.name!==e.name?t:n})))})).catch((function(n){r({message:"Information of ".concat(e.name," has already been removed from server"),status:"failure"})})),r({message:"Number of ".concat(e.name," changed succesfully"),status:"update"}),setTimeout((function(){r(null)}),5e3)}else r({message:"Please give a phonenumber",status:"failure"}),setTimeout((function(){r(null)}),5e3)}(t.find((function(e){return e.name===i})),g,t,c,I),a):(f({name:i,number:g}).then((function(e){c(t.concat(e))})).catch((function(e){var n=e.response.data.error;T(n,"failure")})),void T("".concat(i," was added to the phonebook"),"create"))},numberInput:g})]})};t(39);u.a.render(Object(a.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.099ec612.chunk.js.map